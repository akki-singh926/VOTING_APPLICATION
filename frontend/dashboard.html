<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voting Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo-container">
      <img src="vote.jpeg" alt="Voting Logo" class="logo">
      <h1>Voting Dashboard</h1>
    </div>
    <nav>
      <button class="logout" onclick="logout()">Logout</button>
    </nav>
  </header>

  <div class="container">
    <!-- SIDEBAR NAVIGATION -->
    <aside class="sidebar">
      <button onclick="document.getElementById('profileInfo').scrollIntoView()">ğŸ‘¤ Profile</button>
      <button onclick="document.getElementById('electionPanel').scrollIntoView()">ğŸ—³ï¸ Election</button>
      <button onclick="document.getElementById('votePanel').scrollIntoView()">ğŸ“Š Results</button>
      <button onclick="document.getElementById('adminPanel').scrollIntoView()">âš™ï¸ Admin</button>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <!-- USER PROFILE -->
      <div id="profileInfo" class="panel">
        <h2>Your Profile</h2>
        <p><strong>Name:</strong> <span id="profileName">Loading...</span></p>
        <p><strong>Email:</strong> <span id="profileEmail">Loading...</span></p>
        <p><strong>Age:</strong> <span id="profileAge">Loading...</span></p>
        <p><strong>Role:</strong> <span id="profileRole">Loading...</span></p>
      </div>

      <!-- ELECTION PANEL -->
      <div id="electionPanel" class="panel">
        <h2>Election</h2>
        <div id="electionStatusBox">
          <p><strong>Current Election:</strong> <span id="electionName">â€”</span></p>
          <p><strong>Status:</strong> <span id="electionStatus">â€”</span></p>
          <p><strong>Start:</strong> <span id="electionStart">â€”</span></p>
          <p><strong>End:</strong> <span id="electionEnd">â€”</span></p>
        </div>

        <!-- Admin Controls -->
        <div id="adminElectionControls" style="display:none; margin-top:12px;">
          <h3>Admin Controls</h3>
          <input type="text" id="eName" placeholder="Election name">
          <input type="datetime-local" id="eStart">
          <input type="datetime-local" id="eEnd">
          <button onclick="createElection()">Create Election</button>

          <div style="margin-top:10px;">
            <label>Actions for current election:</label><br>
            <button id="btnStart">â–¶ï¸ Start Now</button>
            <button id="btnClose">â›” Close Now</button>
          </div>
        </div>
      </div>

      <!-- ADMIN PANEL -->
      <div id="adminPanel" class="panel" style="display:none;">
        <h2>Admin Panel</h2>
        <div class="card">
          <input type="text" id="cName" placeholder="Candidate Name">
          <input type="text" id="cParty" placeholder="Party">
          <input type="number" id="cAge" placeholder="Age">
          <input type="text" id="cBio" placeholder="Short Bio">
          <input type="url" id="cImage" placeholder="Image URL">
          <button onclick="addCandidate()">â• Add Candidate</button>
          <p id="adminMsg" class="msg"></p>
        </div>
        <h3>Manage Candidates</h3>
        <div id="adminCandidates" class="grid"></div>
      </div>

      <!-- VOTER PANEL -->
      <div id="votePanel" class="panel" style="display:none;">
        <h2>Candidates</h2>
        <div id="candidates" class="grid"></div>

        <h2>Results</h2>
        <button onclick="loadResults()" class="btn-refresh">ğŸ”„ Refresh Results</button>
        <div id="results"></div>
        <canvas id="resultsChart" height="250"></canvas>
      </div>
    </main>
  </div>

  <!-- Candidate Modal -->
<div id="candidateModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <div class="modal-body">
      <img id="modalImage" src="" alt="Candidate Image">
      <div class="modal-details">
        <h2 id="modalName"></h2>
        <p><strong>Party:</strong> <span id="modalParty"></span></p>
        <p><strong>Age:</strong> <span id="modalAge"></span></p>
        <p id="modalBio"></p>
      </div>
    </div>
  </div>
</div>


</body>
</html>

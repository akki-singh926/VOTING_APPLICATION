<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voting App - Signup</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="app.js"></script>
</head>
<body>
  <div class="auth-container">
    <div class="auth-card">
      <h2>Signup</h2>

      <div class="form-group">
        <input type="text" id="signupName" placeholder=" " required>
        <label for="signupName">Full Name</label>
      </div>

      <div class="form-group">
        <input type="number" id="signupAge" placeholder=" " required>
        <label for="signupAge">Age</label>
      </div>

      <div class="form-group">
        <input type="email" id="signupEmail" placeholder=" " required>
        <label for="signupEmail">Email</label>
      </div>

      <div class="form-group">
        <input type="text" id="signupMobile" placeholder=" ">
        <label for="signupMobile">Mobile Number</label>
      </div>

      <div class="form-group">
        <input type="text" id="signupAddress" placeholder=" " required>
        <label for="signupAddress">Address</label>
      </div>

      <div class="form-group">
        <input type="text" id="signupAadhar" placeholder=" " required>
        <label for="signupAadhar">Aadhar Number</label>
      </div>

      <div class="form-group">
        <input type="password" id="signupPassword" placeholder=" " required>
        <label for="signupPassword">Password</label>
      </div>

      <div class="form-group">
        <select id="signupRole" required>
          <option value="" disabled selected></option>
          <option value="voter">Voter</option>
          <option value="admin">Admin (first use only!)</option>
        </select>
        <label for="signupRole">Role</label>
      </div>

      <button onclick="signup()">Signup</button>

      <span class="auth-back-link" onclick="window.location.href='login.html'">‚Üê Back to Login</span>
      <p class="error" id="signupMsg"></p>
    </div>
  </div>

  <script>
    // Keep your admin existence check logic intact
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const res = await fetch('http://localhost:3000/user/admin/check');
        if (res.ok) {
          const data = await res.json();
          if (data.exists) {
            const adminOption = document.querySelector('#signupRole option[value="admin"]');
            if (adminOption) adminOption.remove();
          }
        }
      } catch (err) {
        console.error('Failed to check admin existence:', err);
      }
    });
  </script>
</body>
</html>
